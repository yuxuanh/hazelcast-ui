hzApp.controller("mapsBrowserCtrl",["$scope","$routeParams","$http","webServiceHost","fetchMapMemoryStats","listmembers","$rootScope","listMaps",function($scope,$routeParams,$http,webServiceHost,fetchMapMemoryStats,listmembers,$rootScope,listMaps){function loadMapMemoryStats(){$rootScope.$broadcast("destroyHome"),$rootScope.$broadcast("destroyMember"),$scope.hzMembers=$rootScope.nodes,$scope.mapMemory=[];for(var i=0;i<$scope.hzMembers.length;i++){var host=$scope.hzMembers[i];fetchMapMemoryStats.nodeMemory(host.split(":")[0],$scope.mapId).then(function(response){$scope.mapMemory.push(response.data)})}}$scope.mapId=$routeParams.mapId,$scope.mapKey,$scope.mapType="String",$scope.getMapOutput=!1,$scope.mapMemory=[],$rootScope.nodes||listmembers.members().then(function(response){$rootScope.nodes=response.data}),$rootScope.maps||listMaps.maps().then(function(response){$rootScope.maps=response.data}),$scope.mapId&&(loadMapMemoryStats(),clearInterval($rootScope.clearMapOnMembersInfo),$rootScope.clearMapOnMembersInfo=setInterval(function(){loadMapMemoryStats()},3e4)),$rootScope.$on("destroyMap",function(event,data){clearInterval($rootScope.clearMapOnMembersInfo)}),$scope.value=function(){$scope.webout="",$scope.weboutsize="",$scope.getMapSize=!1;var callURL=webServiceHost+"/getValue/"+$routeParams.mapId+"/"+$scope.mapKey+"/"+$scope.mapType;$http({method:"GET",url:callURL}).then(function(response){$scope.webout=response.data,$scope.getMapOutput=!0},function(response){$scope.webout=response.statusText})},$scope.clear=function(){$scope.webout="",$scope.weboutsize="",$scope.getMapSize=!1,$scope.mapKey=""}}]);